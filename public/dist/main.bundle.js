!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist",e(e.s=0)}([function(t,e,n){"use strict";var o=n(1);!function(t){t&&t.__esModule}(o),n(2),Date.prototype.toGranite||function(){function t(t){return t<10?"0"+t:t}Date.prototype.toGranite=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+" "+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())}}(),document.querySelectorAll("form").forEach(function(t){t.querySelectorAll("form input[type=submit]").forEach(function(e){var n=e.getAttribute("data-confirm");n&&e.addEventListener("click",function(e){e.preventDefault(),confirm(n)&&t.submit()})})})},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r={join:"join",leave:"leave",message:"message"},c=function(){return(new Date).getTime()},a=function(t){return(c()-t)/1e3},s=e.Channel=function(){function t(e,n){o(this,t),this.topic=e,this.socket=n,this.onMessageHandlers=[]}return i(t,[{key:"join",value:function(){this.socket.ws.send(JSON.stringify({event:r.join,topic:this.topic}))}},{key:"leave",value:function(){this.socket.ws.send(JSON.stringify({event:r.leave,topic:this.topic}))}},{key:"handleMessage",value:function(t){this.onMessageHandlers.forEach(function(e){e.subject===t.subject&&e.callback(t.payload)})}},{key:"on",value:function(t,e){this.onMessageHandlers.push({subject:t,callback:e})}},{key:"push",value:function(t,e){this.socket.ws.send(JSON.stringify({event:r.message,topic:this.topic,subject:t,payload:e}))}}]),t}(),u=e.Socket=function(){function t(e){o(this,t),this.endpoint=e,this.ws=null,this.channels=[],this.lastPing=c(),this.reconnectTries=0,this.attemptReconnect=!0}return i(t,[{key:"_connectionIsStale",value:function(){return a(this.lastPing)>100}},{key:"_reconnect",value:function(){var t=this;clearTimeout(this.reconnectTimeout),this.reconnectTimeout=setTimeout(function(){t.reconnectTries++,t.connect(t.params),t._reconnect()},this._reconnectInterval())}},{key:"_reconnectInterval",value:function(){return[1e3,2e3,5e3,1e4][this.reconnectTries]||1e4}},{key:"_poll",value:function(){var t=this;this.pollingTimeout=setTimeout(function(){t._connectionIsStale()?t._reconnect():t._poll()},1e4)}},{key:"_startPolling",value:function(){clearTimeout(this.pollingTimeout),this._poll()}},{key:"_handlePing",value:function(){this.lastPing=c()}},{key:"_reset",value:function(){clearTimeout(this.reconnectTimeout),this.reconnectTries=0,this.attemptReconnect=!0,this._startPolling()}},{key:"connect",value:function(t){var e=this;this.params=t;var n={location:window.location.hostname,port:window.location.port,protocol:"https:"===window.location.protocol?"wss:":"ws:"};return t&&Object.assign(n,t),n.port&&(n.location+=":"+n.port),new Promise(function(t,o){e.ws=new WebSocket(n.protocol+"//"+n.location+e.endpoint),e.ws.onmessage=function(t){e.handleMessage(t)},e.ws.onclose=function(){e.attemptReconnect&&e._reconnect()},e.ws.onopen=function(){e._reset(),t()}})}},{key:"disconnect",value:function(){this.attemptReconnect=!1,clearTimeout(this.pollingTimeout),clearTimeout(this.reconnectTimeout),this.ws.close()}},{key:"channel",value:function(t){var e=new s(t,this);return this.channels.push(e),e}},{key:"handleMessage",value:function(t){if("ping"===t.data)return this._handlePing();var e=JSON.parse(t.data);this.channels.forEach(function(t){t.topic===e.topic&&t.handleMessage(e)})}}]),t}();t.exports={Socket:u},document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("a[data-method='delete']").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();var n=t.getAttribute("data-confirm")||"Are you sure?";if(confirm(n)){var o=document.createElement("form"),i=document.createElement("input");o.setAttribute("action",t.getAttribute("href")),o.setAttribute("method","POST"),i.setAttribute("type","hidden"),i.setAttribute("name","_method"),i.setAttribute("value","DELETE"),o.appendChild(i),document.body.appendChild(o),o.submit()}return!1})})})},function(t,e,n){"use strict";if(document.getElementById("simple-logger")){var o=document.getElementById("status"),i=document.getElementById("status-dropdown"),r=document.getElementById("status-dropdown-options");Array.from(r.children).forEach(function(t){t.addEventListener("click",function(t){var e=t.target,n=e.getAttribute("data-status").trim(),r=e.innerText.trim();e.innerText=i.innerText.trim(),e.setAttribute("data-status",o.getAttribute("value").trim()),i.innerText=r,o.setAttribute("value",n)})});var c=document.getElementById("opponent-id"),a=document.getElementById("player-dropdown"),s=document.getElementById("player-dropdown-options");Array.from(s.children).forEach(function(t){t.addEventListener("click",function(t){var e=t.target,n=e.getAttribute("data-player-id").trim(),o=e.innerText.trim();e.innerText=a.innerText.trim(),e.setAttribute("data-player-id",c.getAttribute("value").trim()),a.innerText=o,c.setAttribute("value",n)})})}}]);